<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/mdavila_2001/tripadvisorclonemarcelodavila/ui/screens/TripsScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/mdavila_2001/tripadvisorclonemarcelodavila/ui/screens/TripsScreen.kt" />
              <option name="originalContent" value="package com.mdavila_2001.tripadvisorclonemarcelodavila.ui.screens&#10;&#10;import androidx.compose.foundation.layout.Box&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.Add&#10;import androidx.compose.material3.AlertDialog&#10;import androidx.compose.material3.CircularProgressIndicator&#10;import androidx.compose.material3.ExperimentalMaterial3Api&#10;import androidx.compose.material3.FloatingActionButton&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.TextButton&#10;import androidx.compose.material3.Scaffold&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.LaunchedEffect&#10;import androidx.compose.runtime.collectAsState&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.tooling.preview.Preview&#10;import androidx.lifecycle.viewmodel.compose.viewModel&#10;import androidx.navigation.NavController&#10;import com.mdavila_2001.tripadvisorclonemarcelodavila.ui.NavRoutes&#10;import com.mdavila_2001.tripadvisorclonemarcelodavila.ui.components.global.AppBar&#10;import com.mdavila_2001.tripadvisorclonemarcelodavila.ui.components.global.BottomNavigationBar&#10;import com.mdavila_2001.tripadvisorclonemarcelodavila.ui.components.trips.TripList&#10;import com.mdavila_2001.tripadvisorclonemarcelodavila.ui.theme.TripAdvisorCloneMarceloDavilaTheme&#10;import com.mdavila_2001.tripadvisorclonemarcelodavila.ui.viewmodels.Tab&#10;import com.mdavila_2001.tripadvisorclonemarcelodavila.ui.viewmodels.TripsViewModel&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun TripsScreen(&#10;    navController: NavController,&#10;    viewModel: TripsViewModel = viewModel()&#10;) {&#10;    val uiState by viewModel.uiState.collectAsState()&#10;&#10;    val navigateToLogin by viewModel.navigateToLogin.collectAsState()&#10;&#10;    LaunchedEffect(navigateToLogin) {&#10;        if (navigateToLogin){&#10;            navController.navigate(&quot;login&quot;) {&#10;                popUpTo(navController.graph.startDestinationId) {&#10;                    inclusive = true&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    LaunchedEffect(key1 = Unit) {&#10;        viewModel.loadData()&#10;    }&#10;&#10;    val showLogoutDialog = remember { mutableStateOf(false) }&#10;&#10;    Scaffold(&#10;        topBar = {&#10;            AppBar(&#10;                title = if (uiState.selectedTab == Tab.TRIPS) &quot;Viajes&quot; else &quot;Mis Viajes&quot;,&#10;                backEnabled = false,&#10;                onLogoutClick = {&#10;                    showLogoutDialog.value = true&#10;                },&#10;                onBackClick = {},&#10;                modifier = Modifier,&#10;            )&#10;        },&#10;        floatingActionButton = {&#10;            FloatingActionButton(&#10;                onClick = {&#10;                    // Navegar a la ruta de creación sin pasar placeholders.&#10;                    // Usamos createRoute() que devuelve &quot;trip_form&quot; en lugar&#10;                    // de la ruta que contiene &quot;{name}&quot; y &quot;{country}&quot;.&#10;                    navController.navigate(NavRoutes.TripForm.createRoute())&#10;                }&#10;            ) {&#10;                Icon(&#10;                    Icons.Default.Add,&#10;                    &quot;Crear Viaje&quot;&#10;                )&#10;            }&#10;        },&#10;        bottomBar = {&#10;            BottomNavigationBar(&#10;                selectedTab = uiState.selectedTab.ordinal,&#10;                onTabSelected = { index -&gt;&#10;                    viewModel.selectTab(Tab.entries[index])&#10;                },&#10;                modifier = Modifier&#10;            )&#10;        }&#10;    ) { paddingValues -&gt;&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(paddingValues)&#10;        ) {&#10;            if(uiState.isLoading) {&#10;                CircularProgressIndicator(&#10;                    modifier = Modifier.align(Alignment.Center)&#10;                )&#10;            } else if (uiState.errorMessage != null) {&#10;                Text(&#10;                    text = uiState.errorMessage!!,&#10;                    modifier = Modifier.align(Alignment.Center)&#10;                )&#10;            } else {&#10;                TripList(&#10;                    trips = uiState.currentList,&#10;                    onTripClick = { trip -&gt;&#10;                        navController.navigate(&#10;                            NavRoutes.TripDetail.createRoute(&#10;                                tripId = trip.id,&#10;                                tripName = trip.name,&#10;                                tripOwner = trip.username&#10;                            )&#10;                        )&#10;                    },&#10;                    isMyTrip = (uiState.selectedTab == Tab.MY_TRIPS),&#10;                    onEditClick = { trip -&gt;&#10;                        navController.navigate(&#10;                            NavRoutes.TripForm.createEditRoute(&#10;                                tripId = trip.id,&#10;                                name = trip.name,&#10;                                country = trip.country&#10;                            )&#10;                        )&#10;                    },&#10;&#10;                    onDeleteClick = { trip -&gt;&#10;                        viewModel.onDeleteTrip(trip)&#10;                    }&#10;                )&#10;            }&#10;&#10;            if (showLogoutDialog.value) {&#10;                AlertDialog(&#10;                    onDismissRequest = { showLogoutDialog.value = false },&#10;                    title = { Text(text = &quot;Confirmar cierre de sesión&quot;) },&#10;                    text = { Text(text = &quot;¿Estás seguro que quieres cerrar sesión?&quot;) },&#10;                    confirmButton = {&#10;                        TextButton(onClick = {&#10;                            showLogoutDialog.value = false&#10;                            viewModel.onLogoutClicked()&#10;                        }) {&#10;                            Text(&quot;Sí&quot;)&#10;                        }&#10;                    },&#10;                    dismissButton = {&#10;                        TextButton(onClick = { showLogoutDialog.value = false }) {&#10;                            Text(&quot;No&quot;)&#10;                        }&#10;                    }&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Preview(showBackground = true)&#10;@Composable&#10;fun TripsScreenPreview() {&#10;    TripAdvisorCloneMarceloDavilaTheme() {&#10;        TripsScreen(&#10;            navController = NavController(LocalContext.current)&#10;        )&#10;    }&#10;}" />
              <option name="updatedContent" value="package com.mdavila_2001.tripadvisorclonemarcelodavila.ui.screens&#10;&#10;import androidx.compose.foundation.layout.Box&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.Add&#10;import androidx.compose.material3.AlertDialog&#10;import androidx.compose.material3.CircularProgressIndicator&#10;import androidx.compose.material3.ExperimentalMaterial3Api&#10;import androidx.compose.material3.FloatingActionButton&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.TextButton&#10;import androidx.compose.material3.Scaffold&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.LaunchedEffect&#10;import androidx.compose.runtime.collectAsState&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.tooling.preview.Preview&#10;import androidx.lifecycle.viewmodel.compose.viewModel&#10;import androidx.navigation.NavController&#10;import com.mdavila_2001.tripadvisorclonemarcelodavila.ui.NavRoutes&#10;import com.mdavila_2001.tripadvisorclonemarcelodavila.ui.components.global.AppBar&#10;import com.mdavila_2001.tripadvisorclonemarcelodavila.ui.components.global.BottomNavigationBar&#10;import com.mdavila_2001.tripadvisorclonemarcelodavila.ui.components.trips.TripList&#10;import com.mdavila_2001.tripadvisorclonemarcelodavila.ui.theme.TripAdvisorCloneMarceloDavilaTheme&#10;import com.mdavila_2001.tripadvisorclonemarcelodavila.ui.viewmodels.Tab&#10;import com.mdavila_2001.tripadvisorclonemarcelodavila.ui.viewmodels.TripsViewModel&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun TripsScreen(&#10;    navController: NavController,&#10;    viewModel: TripsViewModel = viewModel()&#10;) {&#10;    val uiState by viewModel.uiState.collectAsState()&#10;&#10;    val navigateToLogin by viewModel.navigateToLogin.collectAsState()&#10;&#10;    LaunchedEffect(navigateToLogin) {&#10;        if (navigateToLogin){&#10;            navController.navigate(&quot;login&quot;) {&#10;                popUpTo(navController.graph.startDestinationId) {&#10;                    inclusive = true&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    LaunchedEffect(key1 = Unit) {&#10;        viewModel.loadData()&#10;    }&#10;&#10;    val showLogoutDialog = remember { mutableStateOf(false) }&#10;&#10;    Scaffold(&#10;        topBar = {&#10;            AppBar(&#10;                title = if (uiState.selectedTab == Tab.TRIPS) &quot;Viajes&quot; else &quot;Mis Viajes&quot;,&#10;                backEnabled = false,&#10;                onLogoutClick = {&#10;                    showLogoutDialog.value = true&#10;                },&#10;                onBackClick = {},&#10;                modifier = Modifier,&#10;            )&#10;        },&#10;        floatingActionButton = {&#10;            FloatingActionButton(&#10;                onClick = {&#10;                    // Navegar a la ruta de creación sin pasar placeholders.&#10;                    // Usamos createRoute() que devuelve &quot;trip_form&quot; en lugar&#10;                    // de la ruta que contiene &quot;{name}&quot; y &quot;{country}&quot;.&#10;                    navController.navigate(NavRoutes.TripForm.createRoute())&#10;                }&#10;            ) {&#10;                Icon(&#10;                    Icons.Default.Add,&#10;                    &quot;Crear Viaje&quot;&#10;                )&#10;            }&#10;        },&#10;        bottomBar = {&#10;            BottomNavigationBar(&#10;                selectedTab = uiState.selectedTab.ordinal,&#10;                onTabSelected = { index -&gt;&#10;                    viewModel.selectTab(Tab.entries[index])&#10;                },&#10;                modifier = Modifier&#10;            )&#10;        }&#10;    ) { paddingValues -&gt;&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(paddingValues)&#10;        ) {&#10;            if(uiState.isLoading) {&#10;                CircularProgressIndicator(&#10;                    modifier = Modifier.align(Alignment.Center)&#10;                )&#10;            } else if (uiState.errorMessage != null) {&#10;                Text(&#10;                    text = uiState.errorMessage!!,&#10;                    modifier = Modifier.align(Alignment.Center)&#10;                )&#10;            } else {&#10;                TripList(&#10;                    trips = uiState.currentList,&#10;                    onTripClick = { trip -&gt;&#10;                        navController.navigate(&#10;                            NavRoutes.TripDetail.createRoute(&#10;                                tripId = trip.id,&#10;                                tripName = trip.name,&#10;                                tripOwner = trip.username&#10;                            )&#10;                        )&#10;                    },&#10;                    isMyTrip = (uiState.selectedTab == Tab.MY_TRIPS),&#10;                    onEditClick = { trip -&gt;&#10;                        navController.navigate(&#10;                            NavRoutes.TripForm.createEditRoute(&#10;                                tripId = trip.id,&#10;                                name = trip.name,&#10;                                country = trip.country&#10;                            )&#10;                        )&#10;                    },&#10;&#10;                    onDeleteClick = { trip -&gt;&#10;                        viewModel.onDeleteTrip(trip)&#10;                    }&#10;                )&#10;            }&#10;&#10;            if (showLogoutDialog.value) {&#10;                AlertDialog(&#10;                    onDismissRequest = { showLogoutDialog.value = false },&#10;                    title = { Text(text = &quot;Confirmar cierre de sesión&quot;) },&#10;                    text = { Text(text = &quot;¿Estás seguro que quieres cerrar sesión?&quot;) },&#10;                    confirmButton = {&#10;                        TextButton(onClick = {&#10;                            showLogoutDialog.value = false&#10;                            viewModel.onLogoutClicked()&#10;                        }) {&#10;                            Text(&quot;Sí&quot;)&#10;                        }&#10;                    },&#10;                    dismissButton = {&#10;                        TextButton(onClick = { showLogoutDialog.value = false }) {&#10;                            Text(&quot;No&quot;)&#10;                        }&#10;                    }&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Preview(showBackground = true)&#10;@Composable&#10;fun TripsScreenPreview() {&#10;    TripAdvisorCloneMarceloDavilaTheme() {&#10;        TripsScreen(&#10;            navController = NavController(LocalContext.current)&#10;        )&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>